<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><!-- Inform modern browsers that this page supports both dark and light color schemes,
  and the page author prefers light. --><meta name="color-scheme" content="dark light"><script>
  // If `prefers-color-scheme` is not supported, fall back to light mode.
  // i.e. In this case, inject the `light` CSS before the others, with
  // no media filter so that it will be downloaded with highest priority.
  if (window.matchMedia("(prefers-color-scheme: dark)").media === "not all") {
    document.documentElement.style.display = "none";
    document.head.insertAdjacentHTML(
      "beforeend",
      "<link id=\"css\" rel=\"stylesheet\" href=\"https://bootswatch.com/3/flatly/bootstrap.css\" onload=\"document.documentElement.style.display = ''\">"
    );
  }
</script><title>scdrake TODO list • scdrake</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css"><script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet"><script src="pkgdown.js"></script><!-- docsearch --><script src="docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous"><link href="docsearch.css" rel="stylesheet"><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="scdrake TODO list"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=281550496"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', '281550496');
</script><!-- Flatly Theme - Light  --><link id="css-light" rel="stylesheet" href="https://bootswatch.com/3/flatly/bootstrap.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><!-- Darkly Theme - Dark --><link id="css-dark" rel="stylesheet" href="https://bootswatch.com/3/darkly/bootstrap.css" media="(prefers-color-scheme: dark)"><!-- preferably CSS --><link rel="stylesheet" href="preferably.css"><link id="css-code-light" rel="stylesheet" href="code-color-scheme-light.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><link id="css-code-dark" rel="stylesheet" href="code-color-scheme-dark.css" media="(prefers-color-scheme: dark)"><script src="darkswitch.js"></script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-title-body">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">scdrake</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="articles/scdrake.html">Get started</a>
</li>
<li>
  <a href="articles/pipeline_overview.html">Pipeline overview</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="divider">
    <li class="dropdown-header">General information</li>
    <li>
      <a href="articles/pipeline_overview.html">Pipeline overview</a>
    </li>
    <li>
      <a href="articles/scdrake_run.html">Running the pipeline, environment variables</a>
    </li>
    <li>
      <a href="articles/cluster_markers.html">Cluster markers</a>
    </li>
    <li>
      <a href="articles/drake_basics.html">drake basics</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Configs</li>
    <li>
      <a href="articles/scdrake_config.html">scdrake configs: a general overview</a>
    </li>
    <li>
      <a href="articles/config_pipeline.html">Pipeline config</a>
    </li>
    <li>
      <a href="articles/config_main.html">Main config</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Single-sample pipeline stages</li>
    <li>
      <a href="articles/stage_input_qc.html">Input and quality control stage</a>
    </li>
    <li>
      <a href="articles/stage_norm_clustering.html">Normalization and clustering stage</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Integration pipeline stages</li>
    <li>
      <a href="articles/stage_integration.html">Integration stage</a>
    </li>
    <li>
      <a href="articles/stage_int_clustering.html">Post-integration clustering stage</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Common stages</li>
    <li>
      <a href="articles/stage_cluster_markers.html">Cluster markers stage</a>
    </li>
    <li>
      <a href="articles/stage_contrasts.html">Contrasts stage</a>
    </li>
  </ul></li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
          <a href="#" id="css-toggle-btn">
            <span class="fas fa-adjust fa-lg"></span>
          </a>
        </li>
        
        <li>
  <a href="https://github.com/bioinfocz/scdrake" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
        
        


      </ul><form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off"></div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
    <div class="page-header">
      <h1>scdrake TODO list</h1>
    </div>


<div id="scdrake-todo-list" class="section level1">

</div>
<div class="section level1">
<h1 id="general">General<a class="anchor" aria-label="anchor" href="#general"></a></h1>
<ul class="task-list"><li>
<input type="checkbox" disabled>
check <a href="https://github.com/ktrns/scrnaseq" class="external-link uri">https://github.com/ktrns/scrnaseq</a> - there might be some interesting features worth implementing (mainly in sense of output - plots, statistics, etc.)</li>
<li>
<input type="checkbox" disabled checked>
use functions instead of long target expressions - more reproducible<ul><li>use function names in the format <code>&lt;target_name&gt;_fn()</code> for better readability (in case of single target specific function)</li>
</ul></li>
<li>
<input type="checkbox" disabled>
(?) shorten the names of stages:<ul><li>
<code>input_qc</code> -&gt; <code>qc</code>
</li>
<li>
<code>norm_clustering</code> -&gt; <code>normclust</code>
</li>
<li>
<code>cluster_markers</code> -&gt; <code>markers</code>
</li>
</ul></li>
<li>
<input type="checkbox" disabled>
(?) Rewrite to <a href="https://github.com/ropensci/targets" class="external-link">targets</a>. Unfortunately, “drake is superseded. The targets R package is the long-term successor of drake, and it is more robust and easier to use. Please visit <a href="https://books.ropensci.org/targets/drake.html" class="external-link uri">https://books.ropensci.org/targets/drake.html</a> for full context and advice on transitioning.”<ul><li>On the other hand, <code>drake</code> is much more flexible. For example, <code>targets</code> doesn’t allow to use a cache other than <code>.targets</code>.</li>
</ul></li>
<li>
<input type="checkbox" disabled><a href="https://rmarkdown.rstudio.com/flexdashboard/examples.html" class="external-link">flexdashboard</a> seems like a nice alternative to traditional layout of Rmd documents</li>
</ul></div>
<div class="section level1">
<h1 id="open-source-project">Open-source project<a class="anchor" aria-label="anchor" href="#open-source-project"></a></h1>
<ul class="task-list"><li>
<input type="checkbox" disabled checked>
rewrite to R package - see <a href="https://github.com/tiernanmartin/drakepkg" class="external-link">this</a> and <a href="https://github.com/januz/drakepkg" class="external-link">this</a> example, and also <a href="https://books.ropensci.org/drake/projects.html#workflows-as-r-packages" class="external-link">a chapter</a> from <code>drake</code>s manual</li>
<li>
<input type="checkbox" disabled checked>
write documentation<ul><li>
<input type="checkbox" disabled checked>
installation</li>
<li>
<input type="checkbox" disabled checked>
basic usage</li>
<li>
<input type="checkbox" disabled checked>
config variables with examples</li>
<li>
<input type="checkbox" disabled><del>better documentation inside YAML config files</del><ul><li>Configs are now documented in pkgdown.</li>
</ul></li>
<li>
<input type="checkbox" disabled checked>
vignettes</li>
<li>
<input type="checkbox" disabled checked>
Roxygen documentation</li>
<li>
<input type="checkbox" disabled checked>
documentation of targets</li>
<li><a href="https://martinctc.github.io/blog/make-package-even-more-awesome/" class="external-link">Top 10 tips to make your R package even more awesome</a></li>
<li>
<input type="checkbox" disabled checked>
GitHub actions<ul class="task-list"><li>
<input type="checkbox" disabled checked><a href="https://github.com/r-lib/actions" class="external-link uri">https://github.com/r-lib/actions</a><ul class="task-list"><li>
<input type="checkbox" disabled checked><a href="https://lcolladotor.github.io/biocthis/" class="external-link uri">https://lcolladotor.github.io/biocthis/</a> - specially for Bioconductor packages</li>
</ul></li>
<li>
<input type="checkbox" disabled><a href="https://github.com/nvuillam/mega-linter" class="external-link uri">https://github.com/nvuillam/mega-linter</a>
</li>
<li>
<input type="checkbox" disabled checked>
automatic <code>pkgdown</code>
</li>
</ul></li>
</ul></li>
<li>
<input type="checkbox" disabled><a href="https://docs.github.com/en/github/building-a-strong-community" class="external-link">Building a strong community</a>
</li>
</ul></div>
<div class="section level1">
<h1 id="config">Config<a class="anchor" aria-label="anchor" href="#config"></a></h1>
<ul class="task-list"><li>
<input type="checkbox" disabled checked>
use YAML format for configs<ul class="task-list"><li>
<input type="checkbox" disabled checked>
save them as <code>&lt;name&gt;.yaml.default</code> and add script/command to merge them with existing configs named <code>&lt;name&gt;.yaml</code>
</li>
</ul></li>
<li>
<input type="checkbox" disabled checked>
find the right way to update configs - arrays should be overwritten by local config<ul><li>
<code>yq merge -a overwrite -x *.default *.yml</code> is used</li>
</ul></li>
<li>
<input type="checkbox" disabled checked><del>add parameter to config for not updating configs (prevent overwrite)</del><ul><li><del>warn user when this parameter is False (or interactive y/n to overwrite)</del></li>
<li>comments in local configs are now preserved unless <code>USE_DEFAULT_CONFIG_STRUCTURE: True</code>, which replaces the structure of local configs by default ones (i.e. only values are overwritten by local configs)</li>
</ul></li>
<li>
<input type="checkbox" disabled>
more checks of config variables, similar to those written for <code>CLUSTER_MARKER_SOURCES</code>
</li>
<li>
<input type="checkbox" disabled>
YAML validation:<ul><li>
<a href="http://json-schema.org/" class="external-link uri">http://json-schema.org/</a> and <a href="https://json-schema-everywhere.github.io/" class="external-link uri">https://json-schema-everywhere.github.io/</a>
</li>
<li><a href="https://github.com/neilpa/yajsv" class="external-link uri">https://github.com/neilpa/yajsv</a></li>
<li><a href="https://stackoverflow.com/questions/3262569/validating-a-yaml-document-in-python" class="external-link uri">https://stackoverflow.com/questions/3262569/validating-a-yaml-document-in-python</a></li>
<li><a href="https://docs.python-cerberus.org/en/stable/" class="external-link uri">https://docs.python-cerberus.org/en/stable/</a></li>
<li><a href="http://www.kuwata-lab.com/kwalify/" class="external-link uri">http://www.kuwata-lab.com/kwalify/</a></li>
</ul></li>
<li>
<input type="checkbox" disabled checked>
environment variables with path to pipeline config directory, and single sample or integration config directory</li>
</ul></div>
<div class="section level1">
<h1 id="drake">drake<a class="anchor" aria-label="anchor" href="#drake"></a></h1>
<ul class="task-list"><li>
<input type="checkbox" disabled checked><del>create <code>make.R</code> and <code>_drake.R</code> for main pipeline stages (<code>01_input_qc</code>, etc.)</del><ul><li><del>i.e. <code>make(plan, targets = "report_input_qc", ...)</code></del></li>
<li>targets are now specified in the <code>00_pipeline.yaml</code> config file</li>
</ul></li>
<li>
<input type="checkbox" disabled checked><del>add plan graph widgets to Rmds</del><ul><li>
<code>htmlwidgets</code> are somehow modifying the global env, so <code>drake</code> throws error</li>
<li>actually not useful at all, so there is a separate <code>make_graphs.R</code> for saving graphs to HTML files</li>
</ul></li>
<li>
<input type="checkbox" disabled>
(?) remove the config dependency main_config from report Rmds, so they won’t be generated each time you change the main config<ul class="task-list"><li>
<input type="checkbox" disabled checked>
from main_config move variables which have a direct impact on analysis to separate file (e.g. number of cores is negligible, while seed is not)</li>
</ul></li>
<li>
<input type="checkbox" disabled checked>
(?) use bang-bang operator (<code>!!</code>) to force evaluation of config parameters inside target commands</li>
<li>
<input type="checkbox" disabled checked>
remove plan graphs from the main plan or create a separate <code>make_plans.R</code>
</li>
<li>
<input type="checkbox" disabled checked>
use <code><a href="reference/with_plan.html">with_plan()</a></code> with <code><a href="https://future.futureverse.org/reference/sequential.html" class="external-link">future::sequential</a></code> for functions known to use the <code>future</code> parallelism (e.g. some <code>Seurat</code> functions such as <code>FindMarkers()</code>) - <code>drake</code> doesn’t work well for within-target paralellism<ul class="task-list"><li>
<input type="checkbox" disabled>
(?) in config allow to specify <code><a href="https://future.futureverse.org/reference/plan.html" class="external-link">future::plan</a></code> both for drake and within-target parallelism</li>
</ul></li>
<li>
<input type="checkbox" disabled>
more parameters in config for <code>make()</code> and <code>drake_plan()</code>
</li>
</ul></div>
<div class="section level1">
<h1 id="misc">Misc<a class="anchor" aria-label="anchor" href="#misc"></a></h1>
<ul class="task-list"><li>
<input type="checkbox" disabled checked>
put Cleanup section in Rmds to collapsible block</li>
<li>
<input type="checkbox" disabled checked>
replace <code>clean_tmpfiles()</code> in RMarkdown (possibly causing failures of parallel rendering targets)</li>
<li>
<input type="checkbox" disabled><del>Consider modifying <code>CLUSTER_MARKERS_SOURCES</code> directly in <code>process_config.R</code> such as parameter groups (for <code>FindAllMarkers()</code> etc.) will be under separate lists in each source (now all params are under <code>params</code> list). This would be clearer than doing that in drake plan.</del><ul><li>
<code>CLUSTER_MARKERS_SOURCES</code> are now parsed to a tibble and defined as a target in the plan.</li>
</ul></li>
<li>
<input type="checkbox" disabled checked>
use <a href="https://here.r-lib.org/" class="external-link">here</a> package to refer to files relative to project root (important mainly for Rmds, which call <code><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd()</a></code> to their locations)</li>
<li>
<input type="checkbox" disabled>
to generated HTMLs, add footer with link to this pipeline</li>
<li>
<input type="checkbox" disabled>
function to export to <a href="https://github.com/gorgitko/ShinyCell" class="external-link">ShinyCell</a><ul><li>probably not worth to be a target in the pipeline</li>
</ul></li>
<li>
<input type="checkbox" disabled>
(?) remove namespace prefixes (<code>dplyr::</code> etc.) and manage conflicts with <code>conflicted</code>
</li>
<li>
<input type="checkbox" disabled>
instead of <code><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist()</a></code> use proper <code>purrr</code> functions such as <code>map_chr()</code>
</li>
</ul></div>
<div class="section level1">
<h1 id="single-sample-analysis">Single-sample analysis<a class="anchor" aria-label="anchor" href="#single-sample-analysis"></a></h1>
<div class="section level2">
<h2 id="01_input_qc">01_input_qc<a class="anchor" aria-label="anchor" href="#01_input_qc"></a></h2>
<ul class="task-list"><li>
<input type="checkbox" disabled>
general rewrite<ul><li>create separate pipelines for different input data scenarios:
<ul class="task-list"><li>
<input type="checkbox" disabled checked>
single-sample</li>
<li>
<input type="checkbox" disabled checked>
integration</li>
<li>
<input type="checkbox" disabled>
(?) already processed single-sample with barcode filtering (e.g. data are already normalized and we want to only do gene filtering and skip normalization -&gt; directly go to HVG selection, PCA, dimreds, clustering, etc.)</li>
</ul></li>
</ul></li>
<li>
<input type="checkbox" disabled checked>
use <code>readd()</code> instead of <code>loadd()</code> of some variables</li>
<li>
<input type="checkbox" disabled>
filtering of cells by barcodes imported from a file<ul><li>in different stages: before QC, before normalization, before clustering, …</li>
</ul></li>
<li>
<input type="checkbox" disabled>
parameter to skip cell and/or gene filtering</li>
<li>
<input type="checkbox" disabled>
QC plots - color by passed filter</li>
<li>
<input type="checkbox" disabled>
configurable usage of specific MAD stats used for dataset-sensitive filtering (e.g. only turn on filtering on total UMI)</li>
<li>
<input type="checkbox" disabled checked>
do not filter cells by fraction of rRNA genes</li>
<li>
<input type="checkbox" disabled checked>
by default do not filter genes by fraction of their expression in cells (set to 0)<ul><li>i.e. genes with captured expression in less than 5 % of cells used to be discarded</li>
</ul></li>
<li>
<input type="checkbox" disabled>
allow more flexibility for annotation<ul class="task-list"><li>
<input type="checkbox" disabled>
import of GTF/GFF3 files</li>
<li>
<input type="checkbox" disabled>
load annotation DB from file</li>
</ul></li>
<li>
<input type="checkbox" disabled checked>
import of other formats<ul class="task-list"><li>
<input type="checkbox" disabled checked>
feature-barcode matrix in delimited format, one column for ENSEMBL ID</li>
<li>
<input type="checkbox" disabled checked>
SCE object in Rds format</li>
</ul></li>
</ul></div>
<div class="section level2">
<h2 id="02_norm_clustering">02_norm_clustering<a class="anchor" aria-label="anchor" href="#02_norm_clustering"></a></h2>
<ul class="task-list"><li>
<input type="checkbox" disabled checked>
use only one selected type of normalization in plan (scran or sctransform specified in config)</li>
<li>
<input type="checkbox" disabled>
save dimred plots in PDF and in Rmd output PNG with link to PDF<ul><li>easier handling of dynamic chunk figure size</li>
<li>faster Rmd rendering</li>
<li>handy - people can download PDFs</li>
</ul></li>
<li>
<input type="checkbox" disabled checked>
make a simplified Rmd - probably only dimreds</li>
<li>
<input type="checkbox" disabled checked>
add selected marker plots</li>
<li>
<input type="checkbox" disabled>
export to Loupe, see <a href="https://support.10xgenomics.com/single-cell-gene-expression/software/visualization/latest/tutorial-interoperability" class="external-link">this</a> and <a href="https://github.com/satijalab/seurat/issues/1391" class="external-link">this</a><ul><li>make a function for that, bud don’t make a target for that</li>
</ul></li>
<li>
<input type="checkbox" disabled>
import of (user defined) clusters from Loupe - but only if we implement the export to Loupe</li>
<li>
<input type="checkbox" disabled checked><code>Seurat</code> is using natural logarithm for normalized data (but <code>Seurat v4</code> is using log2 for <code>FindMarkers()</code>). It would be good to have log2 scale when plotting expression in <code>seu</code> (scatterplot, violin).<ul class="task-list"><li>
<input type="checkbox" disabled>
(!) check in <code><a href="reference/sce_norm.html">sctransform_normalization()</a></code> whether the transformation to log2 is done correctly</li>
</ul></li>
<li>
<input type="checkbox" disabled checked>
allow cluster columns to be character factors, not just integers<ul class="task-list"><li>
<input type="checkbox" disabled checked>
add variable to config to recode clusters, e.g. 1 -&gt; “CD8+”</li>
<li>
<input type="checkbox" disabled checked>
keep original cluster numbers in “<clustering_name>_orig” column</clustering_name></li>
<li>
<input type="checkbox" disabled>
rename clusters based on dimred filters, e.g. UMAP1 &gt; 5 -&gt; “CD8+”, add new clustering column for each filter<ul class="task-list"><li>
<input type="checkbox" disabled><code>CellSelector()</code> could be used instead, see <a href="https://satijalab.org/seurat/v3.2/visualization_vignette.html" class="external-link">this</a>
</li>
</ul></li>
</ul></li>
<li>
<input type="checkbox" disabled checked>
if <code>FORCE_PCS_SCE</code> is set, still save PCs computed by <code><a href="https://rdrr.io/pkg/scran/man/denoisePCA.html" class="external-link">scran::getDenoisedPCs</a></code> to show it later in plot</li>
<li>
<input type="checkbox" disabled checked>
add total UMI and doublet score dimred plots for each dimred (target <code>dimred_plot</code>)<ul class="task-list"><li>
<input type="checkbox" disabled checked>
generalize <code>dimred_plot</code> target (the underlying function) to plot any column in object.<ul><li><del><code>CLUSTERING_NAMES</code> could be then “Phase”, “total”, “batch”, etc.</del></li>
<li>added <code>DIMRED_PLOTS_OTHER</code> dict variable to config and created separated targets for clustering and other variables dimplots (<code>dimred_plot_clustering</code> and <code>dimred_plots_other_vars</code>)</li>
</ul></li>
</ul></li>
<li>
<input type="checkbox" disabled checked>
rewrite <code>dimred_plot</code> to dynamic target, improve dependency handling</li>
<li>
<input type="checkbox" disabled checked>
When cluster renaming is used, <code>seu_final_norm_clustering</code> and <code>sce_final_norm_clustering</code> are updated, which will cause <code>cluster_markers</code> stage targets to be outdated (i.e. cluster markers will be recomputed). The solution would be not to save renamed clusters to objects, but keep them in dynamic targets, which will be passed to marker functions.</li>
<li>
<input type="checkbox" disabled checked>
to remove duplicated code in <code>Rmd/02_norm_clustering_simple</code>, it would be good to isolate this code and use the include chunk</li>
<li>
<input type="checkbox" disabled checked>
remove the addition of defined number of PCs</li>
<li>
<input type="checkbox" disabled checked>
optionally skip normalization</li>
</ul><div class="section level3">
<h3 id="cc-regression">(CC) regression<a class="anchor" aria-label="anchor" href="#cc-regression"></a></h3>
<ul class="task-list"><li>
<input type="checkbox" disabled><del>if <code>CC_REGRESS</code> or <code>VARS_TO_REGRESS</code>, compute dimreds also when they are not used</del>
</li>
<li>
<input type="checkbox" disabled checked>
consider a change of cell-cycle regression for SCE object to CC genes removal strategy described <a href="http://bioconductor.org/books/release/OSCA/cell-cycle-assignment.html#removing-cell-cycle-related-genes" class="external-link">here</a> or modified <a href="https://support.bioconductor.org/p/133154/#133250" class="external-link">here</a><ul class="task-list"><li>
<input type="checkbox" disabled>
(?) remove CC-related genes prior to sctransform instead of their regression out</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="hvg-selection">HVG selection<a class="anchor" aria-label="anchor" href="#hvg-selection"></a></h3>
<ul class="task-list"><li>
<input type="checkbox" disabled>
(?) allow to use blocking on cell cycle in <code>modelGeneVar()</code> and <code>modelGeneCV2()</code>
</li>
<li>
<input type="checkbox" disabled>
add parameter to exclude certain genes from HVG selection</li>
</ul></div>
<div class="section level3">
<h3 id="clustering">Clustering<a class="anchor" aria-label="anchor" href="#clustering"></a></h3>
<ul class="task-list"><li>
<input type="checkbox" disabled checked>
revision of implemented clustering algorithms<ul class="task-list"><li>
<input type="checkbox" disabled>
are we using the right algorithms? E.g. is k-means necessary when we have SC3? (But which is also much slower.)</li>
<li>
<input type="checkbox" disabled>
are there any new algorithms?</li>
</ul></li>
<li>
<input type="checkbox" disabled>
check SC3 gene filter param and function for optimal number of clusters (k)</li>
<li>
<input type="checkbox" disabled>
(?) add <a href="http://bioconductor.org/books/release/OSCA/clustering.html#general-purpose-cluster-diagnostics" class="external-link">clustering diagnostics</a><ul class="task-list"><li>
<input type="checkbox" disabled><a href="https://cran.r-project.org/web/packages/clustree/vignettes/clustree.html" class="external-link">clustree</a>
</li>
<li>
<input type="checkbox" disabled><a href="https://github.com/NHLBI-BCB/IKAP" class="external-link">IKAP – Identifying K mAjor cell Population groups in scRNA-seq analysis</a>
</li>
</ul></li>
<li>
<input type="checkbox" disabled><a href="http://bioconductor.org/books/release/OSCA/clustering.html#subclustering" class="external-link">subclustering</a>
</li>
</ul></div>
<div class="section level3">
<h3 id="cell-type-recognition">Cell type recognition<a class="anchor" aria-label="anchor" href="#cell-type-recognition"></a></h3>
<ul><li>
<a href="https://github.com/seandavi/awesome-single-cell#cell-type-identification-and-classification" class="external-link">List of cell type annotation tools</a>
<ul><li>!! <a href="https://bioconductor.org/packages/release/bioc/html/SingleR.html" class="external-link">SingleR</a>
</li>
<li><a href="https://github.com/irrationone/cellassign/" class="external-link">cellassign</a></li>
<li><a href="https://github.com/ZJUFanLab/scCATCH" class="external-link">ssCATCH</a></li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="ligand-receptor-interactions">Ligand-receptor interactions<a class="anchor" aria-label="anchor" href="#ligand-receptor-interactions"></a></h3>
<ul><li>
<a href="https://www.cellphonedb.org/" class="external-link">CellPhoneDB</a> - interactions between clusters</li>
</ul></div>
</div>
</div>
<div class="section level1">
<h1 id="markers">Markers<a class="anchor" aria-label="anchor" href="#markers"></a></h1>
<ul class="task-list"><li>
<input type="checkbox" disabled><a href="https://github.com/theislab/scCODA" class="external-link">scCODA</a> - identification of compositional changes in high-throughput sequencing count data, especially cell compositions from scRNA-seq</li>
</ul><div class="section level2">
<h2 id="cluster_markers">cluster_markers<a class="anchor" aria-label="anchor" href="#cluster_markers"></a></h2>
<ul class="task-list"><li>
<input type="checkbox" disabled checked>
rewrite to scran, reusable for DEA</li>
<li>
<input type="checkbox" disabled>
global markers<ul class="task-list"><li>
<input type="checkbox" disabled checked>
cluster markers computation</li>
<li>
<input type="checkbox" disabled checked>
heatmaps</li>
<li>
<input type="checkbox" disabled checked>
marker plots</li>
<li>
<input type="checkbox" disabled checked>
marker table reports</li>
<li>
<input type="checkbox" disabled checked>
summary report (index page)</li>
<li>
<input type="checkbox" disabled>
GSEA</li>
</ul></li>
<li>
<input type="checkbox" disabled checked>
add marker method parameters to output Rmd (e.g. <code>cluster_sce_kmeans_kc_3</code> -&gt; <code>lfc_cutoff: 0.5</code>)<ul class="task-list"><li>
<input type="checkbox" disabled checked>
added to marker table report</li>
</ul></li>
<li>
<input type="checkbox" disabled>
add filtering to <code><a href="reference/filter_markers.html">filter_markers()</a></code> and config also by other variables (<code>self.average</code> etc.)</li>
<li>
<input type="checkbox" disabled checked>
separate global markers and contrasts</li>
</ul></div>
<div class="section level2">
<h2 id="contrasts">contrasts<a class="anchor" aria-label="anchor" href="#contrasts"></a></h2>
<ul class="task-list"><li>
<input type="checkbox" disabled>
contrasts<ul class="task-list"><li>
<input type="checkbox" disabled checked>
contrasts computation</li>
<li>
<input type="checkbox" disabled checked>
heatmaps</li>
<li>
<input type="checkbox" disabled checked>
marker plots</li>
<li>
<input type="checkbox" disabled checked>
marker table reports</li>
<li>
<input type="checkbox" disabled checked>
summary report (index page)</li>
<li>
<input type="checkbox" disabled>
GSEA</li>
</ul></li>
</ul></div>
<div class="section level2">
<h2 id="gsea-alternative">GSEA alternative<a class="anchor" aria-label="anchor" href="#gsea-alternative"></a></h2>
<ul class="task-list"><li>
<input type="checkbox" disabled><a href="https://github.com/yoseflab/VISION" class="external-link">Vision</a> - Signature Analysis and Visualization for Single-Cell RNA-seq</li>
</ul></div>
<div class="section level2">
<h2 id="visualization">Visualization<a class="anchor" aria-label="anchor" href="#visualization"></a></h2>
<ul class="task-list"><li>
<input type="checkbox" disabled>
additional plots: plot alongside with clustering plot</li>
<li>
<input type="checkbox" disabled>
allow to specify cluster specific colors<ul class="task-list"><li>
<input type="checkbox" disabled>
maybe add it to <code>CELL_GROUPINGS</code>
</li>
</ul></li>
<li>
<input type="checkbox" disabled>
cluster marker genes heatmap:<ul class="task-list"><li>
<input type="checkbox" disabled>
(?) rewrite to <code>ComplexHeatmap</code>
</li>
<li>
<input type="checkbox" disabled>
add gaps to rows (to see each top N genes from a cluster)</li>
</ul></li>
<li>
<input type="checkbox" disabled>
look at hexagonal plots: <a href="https://github.com/SaskiaFreytag/schex" class="external-link uri">https://github.com/SaskiaFreytag/schex</a>
</li>
<li>
<input type="checkbox" disabled>
Use <a href="https://github.com/VPetukhov/ggrastr" class="external-link"><code>ggrastr</code></a> for large data (&gt; 10 000 cells). It converts points to raster -&gt; better PDF performance.</li>
<li>
<input type="checkbox" disabled checked><del>fix header tooltips in <code>cluster_markers_table_template.Rmd</code></del><ul><li>header tooltips are not used anymore</li>
</ul></li>
<li>
<input type="checkbox" disabled checked>
dotplots (similar to heatmaps): <code><a href="https://rdrr.io/pkg/scater/man/plotDots.html" class="external-link">scater::plotDots()</a></code>
</li>
<li>
<input type="checkbox" disabled>
alternative plots:<ul class="task-list"><li>
<input type="checkbox" disabled>
barplot heatmap (<a href="https://pasteboard.co/JNneVHK.png" class="external-link">here</a> and <a href="https://pasteboard.co/JNnfE4V.png" class="external-link">here</a>), <a href="https://doi.org/10.1016/j.celrep.2017.11.050" class="external-link">paper</a>
</li>
<li>
<input type="checkbox" disabled><a href="https://pasteboard.co/JNngyug.png" class="external-link">cluster correlation</a> (<a href="https://www.nature.com/articles/s41593-017-0056-2" class="external-link">paper</a>)</li>
</ul></li>
</ul></div>
<div class="section level2">
<h2 id="marker-set-comparisons">Marker set comparisons<a class="anchor" aria-label="anchor" href="#marker-set-comparisons"></a></h2>
<ul class="task-list"><li>
<input type="checkbox" disabled>
Venn diagrams of significant markers.</li>
</ul></div>
</div>
<div class="section level1">
<h1 id="gene-set-analysis">Gene set analysis<a class="anchor" aria-label="anchor" href="#gene-set-analysis"></a></h1>
<ul><li>some other methods:
<ul><li>
<a href="https://bioconductor.org/packages/release/bioc/html/AUCell.html" class="external-link">AUCell</a> - analysis of “gene set” activity in single-cell RNA-seq data (e.g. identify cells with specific gene signatures)</li>
<li>
<a href="https://github.com/xzhoulab/iDEA" class="external-link">iDEA</a> - Integrative Differential expression and gene set Enrichment Analysis using summary statistics for scRNA-seq</li>
<li>
<a href="https://www.bioconductor.org/packages/release/bioc/html/GSVA.html" class="external-link">GSVA</a> - Gene Set Variation Analysis
<ul><li><a href="https://rdrr.io/bioc/singleCellTK/man/gsvaSCE.html" class="external-link"><code>singleCellTK::gsvaSCE()</code></a></li>
</ul></li>
<li>
<a href="https://github.com/broadinstitute/ssGSEA2.0" class="external-link">ssGSEA</a> - single sample Gene Set Enrichment Analysis</li>
<li>
<a href="http://bioconductor.org/packages/release/bioc/html/progeny.html" class="external-link">progeny</a> - common pathways in cancer</li>
<li>
<a href="https://bioconductor.org/packages/release/data/experiment/html/dorothea.html" class="external-link">dorothea</a> - transcription factor regulons</li>
<li>
<a href="https://www.bioconductor.org/packages/release/bioc/html/viper.html" class="external-link">viper</a> - inference of protein activity from gene expression data</li>
<li>
<a href="https://github.com/aertslab/SCENIC" class="external-link">SCENIC</a> - Single-Cell rEgulatory Network Inference and Clustering</li>
<li>
<a href="https://bioconductor.org/packages/release/bioc/html/GENIE3.html" class="external-link">GENIE3</a> - GEne Network Inference with Ensemble of trees</li>
<li>
<a href="https://bioconductor.org/packages/release/bioc/html/hipathia.html" class="external-link">Hipathia</a> - High-throughput Pathway Analysis</li>
</ul></li>
<li>
<input type="checkbox" disabled>
add <a href="https://yulab-smu.github.io/clusterProfiler-book/chapter5.html#go-classification" class="external-link">GeneOntology</a><ul><li>
<a href="https://guangchuangyu.github.io/2015/10/use-simplify-to-remove-redundancy-of-enriched-go-terms/" class="external-link">simplify</a> the GO terms (remove redundant ones)</li>
</ul></li>
<li>
<input type="checkbox" disabled>
more MSigDB genesets - hallmark, …</li>
<li>
<input type="checkbox" disabled>
(?) To output datatable add child rows with gene IDs present in a term. See <a href="https://rstudio.github.io/DT/002-rowdetails.html" class="external-link">DT child rows</a> and its <a href="http://www.reigo.eu/2018/04/extending-dt-child-row-example/" class="external-link">extension</a><ul><li>Or create separate HTML reports for them?</li>
</ul></li>
<li>
<input type="checkbox" disabled>
(?) ORA separately for up- and down-regulated markers</li>
<li>
<input type="checkbox" disabled>
add description of GSEA and ORA methods to Rmd</li>
<li>
<input type="checkbox" disabled>
add export of cnetplot from <code>clusterProfiler</code> to graph file importable to <code>Cytoscape</code> (already done in another project: Jirka - BLF and CHDF spheroids)</li>
</ul></div>
<div class="section level1">
<h1 id="trajectory-inference">trajectory inference<a class="anchor" aria-label="anchor" href="#trajectory-inference"></a></h1>
<ul class="task-list"><li>
<input type="checkbox" disabled>
TBD</li>
<li>
<input type="checkbox" disabled><a href="https://dynverse.org/" class="external-link">dynverse</a><ul><li>it was used in one of projects (Jirka - BLF and CHDF spheroids), could be easy to implement</li>
</ul></li>
<li>
<input type="checkbox" disabled><a href="http://velocyto.org/" class="external-link">velocyto</a>
</li>
</ul></div>
<div class="section level1">
<h1 id="integration">Integration<a class="anchor" aria-label="anchor" href="#integration"></a></h1>
<ul class="task-list"><li>
<input type="checkbox" disabled checked>
look at <a href="https://bioconductor.org/packages/release/bioc/vignettes/batchelor/inst/doc/correction.html" class="external-link">batchelor vignette</a><ul><li>
<code>correctExperiments()</code> seems easier to use (“combining the assay data and column metadata for easy downstream use”)</li>
</ul></li>
<li>
<input type="checkbox" disabled checked><a href="http://bioconductor.org/books/release/OSCA/integrating-datasets.html#correction-diagnostics" class="external-link">correction diagnostics</a>
</li>
<li>
<input type="checkbox" disabled>
(?) <a href="http://bioconductor.org/books/release/OSCA/integrating-datasets.html#integration-with-markers" class="external-link">integration using known marker genes of each batch</a>
</li>
<li>
<input type="checkbox" disabled>
(?) use separate HVG parameters for each integration method</li>
</ul></div>


  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>

</div>



      <footer><div class="copyright">
  <p></p><p>Developed by Jiri Novotny, Jan Kubovciak.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.9000.</p>
  <p class="preferably">Using <a href="https://preferably.amirmasoudabdol.name/?source=footer" class="external-link">preferably</a> template.</p>
</div>

      </footer></div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '937cedcd467c204b19fc155c5f35019b',
    indexName: 'scdrake',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script></body></html>

